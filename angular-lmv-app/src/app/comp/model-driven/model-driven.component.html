<main class="container">
    <section class="row">   
        
        <aside class="col col-6 shadow border border-2 border-primary me-2">
            <p class="text-white lead fs-6 bg-dark p-2 m-2">Resultado: {{resultado | json}}</p>
            <hr/>

            <main class="row">
                <article class="col col-4" *ngFor="let f of frutas">
                    <div class="card shadow" >
                        <div class="card-header bg-primary text-white">
                            {{f.nombre}} {{f.precio | currency:'EUR'}}
                        </div>
                        <div class="card-body lead fs-6">
                          Propiedad:  {{f.propiedad}}
                        </div>
                    </div>
                </article>
            </main>

        </aside>    
        
        <aside class="col col-5 shadow border border-2 border-primary ms-2 bg-light">
            <p class="text-primary lead fs-4">Form Model Driven (Fruta)</p>

            <form [formGroup]="frutaForm" (ngSubmit)="registrar(); frutaForm.reset()">

                <div class="form-group">

                    <label class="lead fs-4 text-primary">Nombre</label>
                    <input type="text" class="form-control text-primary lead mb-2" formControlName="nombre" />

                    <div *ngIf="!frutaForm.errors && (frutaForm.controls['nombre'].dirty || frutaForm.controls['nombre'].touched)">

                        <div [hidden]="!frutaForm.controls['nombre'].hasError('required')" class="alert alert-danger mt-2 lead">
                            Nombre de la fruta es obligatorio
                        </div>

                        <div [hidden]="!frutaForm.controls['nombre'].hasError('minlength')" class="alert alert-danger mt-2 lead">
                            La fruta debe tener al menos 3 caracteres en el nombre
                        </div>
                    </div>

                </div>


                <div class="form-group">
                    <label class="lead fs-4 text-primary">Precio</label>
                    <input type="text" class="form-control text-primary lead mb-2" formControlName="precio"/>
                    
                    <div *ngIf="!frutaForm.errors && (frutaForm.controls['precio'].dirty || frutaForm.controls['precio'].touched)">

                        <div [hidden]="!frutaForm.controls['precio'].hasError('required')" class="alert alert-danger mt-2 lead">
                            El precio es obligatorio    
                        </div>

                        <div [hidden]="!frutaForm.controls['precio'].hasError('pattern')" class="alert alert-danger mt-2 lead">
                            El precio debe ser numerico y maximo de 3 decimales
                        </div>

                    </div>

                </div>

                <div class="form-group">
                    <label class="lead fs-4 text-primary">Propiedad</label>
                    <input type="text" class="form-control text-primary lead mb-2" formControlName="propiedad"/>
                    <div *ngIf="!frutaForm.errors && (frutaForm.controls['propiedad'].dirty || frutaForm.controls['propiedad'].touched)">

                        <div [hidden]="!frutaForm.controls['propiedad'].hasError('required')" class="alert alert-danger mt-2 lead">
                            Propiedad de la fruta es obligatorio
                        </div>

                        <div [hidden]="!frutaForm.controls['propiedad'].hasError('minlength')" class="alert alert-danger mt-2 lead">
                            La fruta debe tener al menos 8 caracteres en la propiedad
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <button class="btn btn-sm btn-dark mb-4 mt-4" [disabled]="!frutaForm.valid">Registrar</button>
                    <!-- <button class="btn btn-sm btn-dark mb-4 mt-4" >
                        <i class="bi bi-alarm"></i>
                    </button> -->

                </div>

            </form>


        </aside>    
    </section>
</main>
